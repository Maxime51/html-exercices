{% extends "layout.njk" %}

  {% block top%}
    {% if pagePlatformOrigin %}
    <a href="/"><button>Retour</button></a>
    <div class="navPage">
    <a href="/games/{{idPlatform}}/1"><<</a>
    {% if indexPageGame == 0%}
    {% else %}
      <a href="/games/{{idPlatform}}/{{indexPageGame-1}}"><</a>
    {% endif %}
    <div class="nbPage">
      {% set limitPage = 10 %}
      {% for page in numberOFPagesGames %}
        {% if indexPageGame >= limitPage %}
          {% set itterator = page + indexPageGame%}
            {% if itterator <= limitPage + (indexPageGame) %}
              {% if itterator <= numberOFPagesGames.length %}
                <a href="/games/{{idPlatform}}/{{itterator}}">{{itterator}}</a>
              {% endif %}
            {% endif %}
        {% else %}
          {% if page <= limitPage %}
            <a href="/games/{{idPlatform}}/{{page}}">{{page}}</a>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
    {% if indexPageGame == numberOFPagesGames.length%}
    {% else %}
      <a href="/games/{{idPlatform}}/{{indexPageGame+1}}">></a>
    {% endif %}
    <a href="/games/{{idPlatform}}/{{numberOFPagesGames.length}}">>></a>
  </div>
    {% else %}
    <a href="/"><button>Retour</button></a>
    <div class="navPage">
    <a href="/games/{{idPlatform}}/1"><<</a>
    {% if indexPageGame == 0%}
    {% else %}
      <a href="/games/{{idPlatform}}/{{indexPageGame-1}}"><</a>
    {% endif %}
    <div class="nbPage">
      {% set limitPage = 10 %}
      {% for page in numberOFPagesGames %}
        {% if indexPageGame > limitPage %}
          {% set itterator = page + indexPageGame%}
            {% if itterator <= limitPage + (indexPageGame) %}
              {% if itterator <= numberOFPagesGames.length %}
                <a href="/games/{{idPlatform}}/{{itterator}}">{{itterator}}</a>
              {% endif %}
            {% endif %}
        {% else %}
          {% if page <= limitPage %}
            <a href="/games/{{idPlatform}}/{{page}}">{{page}}</a>
          {% endif %}
        {% endif %}
      {% endfor %}
    </div>
    {% if indexPageGame == numberOFPagesGames.length%}
    {% else %}
      <a href="/games/{{idPlatform}}/{{indexPageGame+1}}">></a>
    {% endif %}

    <a href="/games/{{idPlatform}}/{{numberOFPagesGames.length}}">>></a>
  </div>
    {% endif %}
  {% endblock %}
  {% block contenu%}
  {% if pagePlatformOrigin %}
    <div><h1>{{namePlatForm}}</1></div>
    <div class="divContainer">
      <div class="blocGames">
        {% for game in gamePlatform%}
        <a href="/games/{{idPlatform}}/{{game.name}}/{{game.id}}">
          <div class="ligneDivGames">
            <div>
              <img src="{{game.cover.url}}"></img>
              <div>{{game.name}}</div>
            </div>

          </div>
        </a>
        {% endfor %}
      </div>
      {% if afficheBloc %}
        {% if schearch %}
          <div class="blocInfoJeu">
          <div class="ligneInfoJeu">
            <div>{{gameInfo.name}}</div>
            <div>
              <p>Plateforme :</p>
                {% for platform in gameInfo.platforms%}
                  <p>{{platform.name}}</p>
                {% endfor %}
              </div>
          </div>
          <div class="gridInfoGame">
              {% for screen in gameInfo.game_screenshots%}
                <div><img src="{{screen.url}}"></img></div>
              {% endfor %}
          </div>
        </div>
        {% else %}
          <div class="blocInfoJeu">
            <div class="ligneInfoJeu">
              <div>{{gameInfo.name}}</div>
              <div>
              <p>Plateforme :</p>
                {% for platform in gameInfo.platforms%}
                  <p>{{platform.name}}</p>
                {% endfor %}
              </div>
            </div>
            <div class="gridInfoGame">
                {% for screen in gameInfo.screenshots%}
                  <div><img src="{{screen.url}}"></img></div>
                {% endfor %}
            </div>
          </div>
        {% endif %}
      {% endif %}
    <div>
  {% else %}
    <div class="divContainer">
      <div class="blocGames">
        {% for game in games %}
        <a href="/games/game/{{game.name}}/{{game.id}}">
          <div class="ligneDivGames">
            <div>
              <img src="{{game.cover.url}}"></img>
              <div>{{game.name}}</div>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
      {% if afficheBloc %}
        {% if schearch %}
          <div class="blocInfoJeu">
          <div class="ligneInfoJeu">
            <div>{{gameInfo.name}}</div>
            <div>
              <p>Plateforme :</p>
                {% for platInfo in gameInfo.games_platforms%}
                  <p>{{platInfo.platform.name}}</p>
                {% endfor %}
              </div>
          </div>
          <div class="gridInfoGame">
              {% for screen in gameInfo.game_screenshots%}
                <div><img src="{{screen.url}}"></img></div>
              {% endfor %}
          </div>
        </div>
        {% else %}
          <div class="blocInfoJeu">
            <div class="ligneInfoJeu">
              <div>{{gameInfo.name}}</div>
              <div>
              <p>Plateforme :</p>
                {% for platform in gameInfo.platforms%}
                  <p>{{platform.name}}</p>
                {% endfor %}
              </div>
            </div>
            <div class="gridInfoGame">
                {% for screen in gameInfo.screenshots%}
                  <div><img src="{{screen.url}}"></img></div>
                {% endfor %}
            </div>
          </div>
        {% endif %}
      {% endif %}
    <div>
  {% endif %}
{% endblock %}



