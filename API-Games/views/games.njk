{% extends "layout.njk" %}

  {% block top%}
<!-- BLOC pagination si origine route provient de platforms -->
    {% if pagePlatformOrigin%}
      <a href="/"><button>Retour</button></a>
      <div class="navPage">
        {% if indexPageGame == 1%}
        {% else %}
          <a href="/games/{{idPlatform}}/1"><<</a>
          <a href="/games/{{idPlatform}}/{{indexPageGame-10}}"><</a>
        {% endif %}
        <div class="nbPage">
          {% set limitPage = 10 %}
          {% for page in numberOFPagesGames %}
            {% if indexPageGame >= limitPage %}
            {% set itterator = page + indexPageGame%}
            {% if itterator <= limitPage + (indexPageGame) %}
              {% if itterator <= numberOFPagesGames.length %}
                <a href="/games/{{idPlatform}}/{{itterator}}">{{itterator}}</a>
              {% endif %}
            {% endif %}
            {% else %}
              {% if page <= limitPage %}
              <a href="/games/{{idPlatform}}/{{page}}">{{page}}</a>
              {% endif %}
            {% endif %}
          {% endfor %}
        </div>
        {% if indexPageGame + limitPage >= numberOFPagesGames.length%}
         <a href="/games/{{idPlatform}}/1">></a>
        {% else %}
          <a href="/games/{{idPlatform}}/{{indexPageGame+10}}">></a>
        {% endif %}
        <a href="/games/{{idPlatform}}/{{numberOFPagesGames.length}}">>></a>
      </div>
    {% else %}
<!-- BLOC pagination si origine route provient de games -->
      {% if schearch == false %}
        <a href="/"><button>Retour</button></a>
        <div class="navPage">
          {% if indexOfPage == 1%}
          {% else %}
          <a href="/games/1"><<</a>
          <a href="/games/{{indexOfPage-10}}"><</a>
          {% endif %}
        <div class="nbPage">
          {% set limitPage = 10 %}
          {% for page in numberOFPagesGames %}
            {% if indexOfPage > limitPage %}
              {% set itterator = page + indexOfPage%}
              {% if itterator <= limitPage + (indexOfPage) %}
                {% if itterator <= numberOFPagesGames.length %}
                <a href="/games/{{itterator}}">{{itterator}}</a>
                {% endif %}
              {% endif %}
              {% else %}
                {% if page <= limitPage %}
                  <a href="/games/{{page}}">{{page}}</a>
                {% endif %}
            {% endif %}
          {% endfor %}
          </div>
          {% if indexOfPage + limitPage >= numberOFPagesGames.length%}
            <a href="/games/1">></a>
          {% else %}
            <a href="/games/{{indexOfPage+10}}">></a>
          {% endif %}
          <a href="/games/{{numberOFPagesGames.length}}">>></a>
        </div>
      {% else %}
        <a href="/"><button>Retour</button></a>
      {% endif %}
    {% endif %}
  {% endblock %}
  {% block contenu%}
<!-- BLOC si origine route provient de platforms -->
  {% if pagePlatformOrigin %}
    <div><h1>{{namePlatForm}}</1></div>
    <div class="divContainer">
      <div class="blocGames">
        {% for game in gamePlatform%}
        <a href="/games/{{idPlatform}}/{{game.name}}/{{game.id}}">
          <div class="ligneDivGames">
            <div>
              <img src="{{game.cover.url}}"></img>
              <div>{{game.name}}</div>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
      {% if afficheBloc %}
        {% if schearch %}
          <div class="blocInfoJeu">
          <div class="ligneInfoJeu">
            <div>{{gameInfo.name}}</div>
            <div>
              <p>Plateforme :</p>
                {% for platform in gameInfo.platforms%}
                  <p>{{platform.name}}</p>
                {% endfor %}
              </div>
          </div>
          <div class="gridInfoGame">
              {% for screen in gameInfo.game_screenshots%}
                <div><img src="{{screen.url}}"></img></div>
              {% endfor %}
          </div>
        </div>
        {% else %}
          <div class="blocInfoJeu">
            <div class="ligneInfoJeu">
              <div>{{gameInfo.name}}</div>
              <div>
              <p>Plateforme :</p>
                {% for platform in gameInfo.platforms%}
                  <p>{{platform.name}}</p>
                {% endfor %}
              </div>
            </div>
            <div class="gridInfoGame">
                {% for screen in gameInfo.screenshots%}
                  <div><img src="{{screen.url}}"></img></div>
                {% endfor %}
            </div>
          </div>
        {% endif %}
      {% endif %}
    <div>
  {% else %}
<!-- BLOC si origine route provient de games -->
    <div class="divContainer">
      <div class="blocGames">
        {% for game in games %}
        <a href="/games/game/{{game.name}}/{{game.id}}">
          <div class="ligneDivGames">
            <div>
              <img src="{{game.cover.url}}"></img>
              <div>{{game.name}}</div>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
      {% if afficheBloc %}
        {% if schearch %}
          <div class="blocInfoJeu">
          <div class="ligneInfoJeu">
            <div>{{gameInfo.name}}</div>
            <div>
              <p>Plateforme :</p>
                {% for platInfo in gameInfo.games_platforms%}
                  <p>{{platInfo.platform.name}}</p>
                {% endfor %}
              </div>
          </div>
          <div class="gridInfoGame">
              {% for screen in gameInfo.game_screenshots%}
                <div><img src="{{screen.url}}"></img></div>
              {% endfor %}
          </div>
        </div>
        {% else %}
          <div class="blocInfoJeu">
            <div class="ligneInfoJeu">
              <div>{{gameInfo.name}}</div>
              <div>
              <p>Plateforme :</p>
                {% for platform in gameInfo.platforms%}
                  <p>{{platform.name}}</p>
                {% endfor %}
              </div>
            </div>
            <div class="gridInfoGame">
                {% for screen in gameInfo.screenshots%}
                  <div><img src="{{screen.url}}"></img></div>
                {% endfor %}
            </div>
          </div>
        {% endif %}
      {% endif %}
    <div>
  {% endif %}
{% endblock %}



